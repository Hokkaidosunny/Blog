<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Webview 调试工具使用 | Saul Shen&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Keep simple, keep happy">
    
    <link rel="preload" href="/blog/assets/css/0.styles.b6bfb1ac.css" as="style"><link rel="preload" href="/blog/assets/js/app.fb7febc9.js" as="script"><link rel="preload" href="/blog/assets/js/2.6fe09025.js" as="script"><link rel="preload" href="/blog/assets/js/8.9eb0f85d.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.530dcc5b.js"><link rel="prefetch" href="/blog/assets/js/11.4d53f011.js"><link rel="prefetch" href="/blog/assets/js/12.045882ce.js"><link rel="prefetch" href="/blog/assets/js/13.b6d5c8aa.js"><link rel="prefetch" href="/blog/assets/js/14.d555f6c2.js"><link rel="prefetch" href="/blog/assets/js/15.4161ee70.js"><link rel="prefetch" href="/blog/assets/js/16.3672a1d7.js"><link rel="prefetch" href="/blog/assets/js/17.0127db4b.js"><link rel="prefetch" href="/blog/assets/js/18.291a8fd7.js"><link rel="prefetch" href="/blog/assets/js/19.57cab65a.js"><link rel="prefetch" href="/blog/assets/js/20.5789a416.js"><link rel="prefetch" href="/blog/assets/js/21.9266840a.js"><link rel="prefetch" href="/blog/assets/js/22.b62e8f4a.js"><link rel="prefetch" href="/blog/assets/js/23.4a3ae109.js"><link rel="prefetch" href="/blog/assets/js/24.cea5c6c5.js"><link rel="prefetch" href="/blog/assets/js/25.1fca3e8c.js"><link rel="prefetch" href="/blog/assets/js/26.20a38b6d.js"><link rel="prefetch" href="/blog/assets/js/27.1b8292e7.js"><link rel="prefetch" href="/blog/assets/js/28.1d5e2edf.js"><link rel="prefetch" href="/blog/assets/js/29.e8700342.js"><link rel="prefetch" href="/blog/assets/js/3.3692318b.js"><link rel="prefetch" href="/blog/assets/js/30.a243aa09.js"><link rel="prefetch" href="/blog/assets/js/4.82a020f0.js"><link rel="prefetch" href="/blog/assets/js/5.41beb069.js"><link rel="prefetch" href="/blog/assets/js/6.e8cd7694.js"><link rel="prefetch" href="/blog/assets/js/7.6b1babaf.js"><link rel="prefetch" href="/blog/assets/js/9.d9d6b09e.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.b6bfb1ac.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">Saul Shen's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="https://github.com/Saul-Shen" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="https://github.com/Saul-Shen" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/blog/2020/0317" class="sidebar-heading clickable"><span>2020</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/2019/0114" class="sidebar-heading clickable"><span>2019</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/2018/0126" class="sidebar-heading clickable"><span>2018</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/2017/0314" class="sidebar-heading clickable open active"><span>2017</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/2017/0314.html" aria-current="page" class="active sidebar-link">Webview 调试工具使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/2017/0314.html#charles" class="sidebar-link">Charles</a></li><li class="sidebar-sub-header"><a href="/blog/2017/0314.html#spy-debugger" class="sidebar-link">Spy-debugger</a></li><li class="sidebar-sub-header"><a href="/blog/2017/0314.html#safari-调试-ios-webview" class="sidebar-link">safari 调试 ios webview</a></li><li class="sidebar-sub-header"><a href="/blog/2017/0314.html#ios-webkit-debug-proxy" class="sidebar-link">ioswebkitdebug_proxy</a></li></ul></li><li><a href="/blog/2017/0510.html" class="sidebar-link">Sass 入门</a></li><li><a href="/blog/2017/0513.html" class="sidebar-link">各种 source-map 对比</a></li><li><a href="/blog/2017/0528.html" class="sidebar-link">实现 electron-tunnel</a></li><li><a href="/blog/2017/0610.html" class="sidebar-link">函数式编程入门</a></li><li><a href="/blog/2017/0716.html" class="sidebar-link">React 进阶</a></li><li><a href="/blog/2017/0717.html" class="sidebar-link">优化 webpack 配置</a></li><li><a href="/blog/2017/0826.html" class="sidebar-link">用修饰器优雅得写高阶组件</a></li><li><a href="/blog/2017/1203.html" class="sidebar-link">写一手漂亮的 js</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/2016/1114" class="sidebar-heading clickable"><span>2016</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="webview-调试工具使用"><a href="#webview-调试工具使用" class="header-anchor">#</a> Webview 调试工具使用</h1> <blockquote><p><code>2017-03-14</code> by <code>Saul Shen</code></p></blockquote> <h4 id="本人工作平台-mac-以下全部针对-mac-平台"><a href="#本人工作平台-mac-以下全部针对-mac-平台" class="header-anchor">#</a> 本人工作平台 mac，以下全部针对 mac 平台</h4> <h2 id="charles"><a href="#charles" class="header-anchor">#</a> Charles</h2> <h4 id="http-抓包"><a href="#http-抓包" class="header-anchor">#</a> http 抓包</h4> <ul><li><code>proxy&gt;proxy settings</code> 设置代理端口</li> <li>手机设置代理连到端口上</li> <li>手机里的所有请求都能被 charles 抓到</li></ul> <h4 id="https-抓包"><a href="#https-抓包" class="header-anchor">#</a> https 抓包</h4> <ul><li><code>proxy&gt;SSL proxy settings</code> 设置要代理的域名，默认端口 443</li> <li><code>proxy&gt;proxy settings</code> 设置代理端口</li> <li>手机连到端口上</li> <li>手机浏览器打开
https://charlesproxy.com/getssl
下载安装证书</li> <li>接着可以访问配置域名的具体请求</li></ul> <h4 id="拦截请求-修改返回数据"><a href="#拦截请求-修改返回数据" class="header-anchor">#</a> 拦截请求，修改返回数据</h4> <ul><li>连接上代理，访问页面</li> <li>右击域名，点击 breakpoints</li> <li>再次访问页面</li> <li>charles 会停留在返回数据界面，等待进一步操作</li></ul> <h2 id="spy-debugger"><a href="#spy-debugger" class="header-anchor">#</a> Spy-debugger</h2> <p>spy-dbugger 是一款一站式页面调试、抓包工具。使用方便，一行命令就能启动。详见<a href="https://github.com/wuchangming/spy-debugger" target="_blank" rel="noopener noreferrer">Spy-debugger<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="safari-调试-ios-webview"><a href="#safari-调试-ios-webview" class="header-anchor">#</a> safari 调试 ios webview</h2> <h4 id="调试-iphone-浏览器页面"><a href="#调试-iphone-浏览器页面" class="header-anchor">#</a> 调试 iPhone 浏览器页面</h4> <ul><li>iphone 在<code>设置&gt;safari&gt;高级</code>里<code>web检查器</code>打开</li> <li>iphone 连接 mac</li> <li>iphone safari 随便打开一个页面</li> <li>在 mac safari <code>开发&gt;xxx的iPhone</code>选项中，可以检查到 iphone safari 打开的页面，点开就可以对该页面进行进一步的调试。</li></ul> <h4 id="调试-app-webview"><a href="#调试-app-webview" class="header-anchor">#</a> 调试 app webview</h4> <ul><li>原材料：simulator、app、mac safari</li> <li>simulator 在<code>设置&gt;safari&gt;高级</code>里<code>web检查器</code>打开</li> <li>在 xcode simulator 中安装 app，<a href="http://taobaofed.org/blog/2015/11/13/web-debug-in-ios/" target="_blank" rel="noopener noreferrer">如何在 simulator 安装 app<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。我是直接拿到源码在 xcode 里 build</li> <li>这个时候在 simulator 打开 app 里的 webview 就会被 mac safari 检查到。</li> <li>safari 在<code>开发&gt;simulator</code>中，就能看见你打开的 webview</li> <li>safari 是默认支持 surce map 的，所以你还可以对源码进行断点调试</li> <li>（记得 webpack devtool 设置成为'source-map',如果是'cheap-module-source-map'或者其他设置，要么断点位置不对，要么就是直接看不到源码，这个涉及到不同 devtool 在不同浏览器中的表现，下次更）</li></ul> <h2 id="ios-webkit-debug-proxy"><a href="#ios-webkit-debug-proxy" class="header-anchor">#</a> ios_webkit_debug_proxy</h2> <p>如果你觉得 safari 调试用的不习惯，还是喜欢 chrome 调试，就需要<a href="https://github.com/google/ios-webkit-debug-proxy" target="_blank" rel="noopener noreferrer">ios-webkit-debug-proxy<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="安装启动"><a href="#安装启动" class="header-anchor">#</a> 安装启动</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#安装</span>
brew <span class="token function">install</span> ios-webkit-debug-proxy

<span class="token comment">#启动</span>
ios_webkit_debug_proxy -f chrome-devtools://devtools/bundled/inspector.html
</code></pre></div><p>（note：启动的时候，要先打开 simulator，再启动<code>ios-webkit-debug-proxy</code>）</p> <h4 id="访问页面"><a href="#访问页面" class="header-anchor">#</a> 访问页面</h4> <ul><li>simulator 打开一个 app 的 webview</li> <li>chrome 浏览器打开http://127.0.0.1:9221</li> <li>点击要打开的页面</li> <li>如果下方有'block'提示,点击页面后，去控制台再点击一下页面链接</li> <li>如果页面没有出现，需要重启一下 app，只有页面走网络传输的时候，才能被监听到，需要让页面再传输一次，被监听到</li> <li>接下来就可以用你熟悉的调试界面查看 webview 了</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/2018/1210.html" class="prev">
        打包第三库那些事
      </a></span> <span class="next"><a href="/blog/2017/0510.html">
        Sass 入门
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.fb7febc9.js" defer></script><script src="/blog/assets/js/2.6fe09025.js" defer></script><script src="/blog/assets/js/8.9eb0f85d.js" defer></script>
  </body>
</html>
