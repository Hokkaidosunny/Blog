(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{367:function(e,a,t){"use strict";t.r(a);var r=t(46),s=Object(r.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"webview-调试工具使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webview-调试工具使用"}},[e._v("#")]),e._v(" Webview 调试工具使用")]),e._v(" "),t("blockquote",[t("p",[t("code",[e._v("2017-03-14")]),e._v(" by "),t("code",[e._v("Saul Shen")])])]),e._v(" "),t("h4",{attrs:{id:"本人工作平台-mac-以下全部针对-mac-平台"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#本人工作平台-mac-以下全部针对-mac-平台"}},[e._v("#")]),e._v(" 本人工作平台 mac，以下全部针对 mac 平台")]),e._v(" "),t("h2",{attrs:{id:"charles"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#charles"}},[e._v("#")]),e._v(" Charles")]),e._v(" "),t("h4",{attrs:{id:"http-抓包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#http-抓包"}},[e._v("#")]),e._v(" http 抓包")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("proxy>proxy settings")]),e._v(" 设置代理端口")]),e._v(" "),t("li",[e._v("手机设置代理连到端口上")]),e._v(" "),t("li",[e._v("手机里的所有请求都能被 charles 抓到")])]),e._v(" "),t("h4",{attrs:{id:"https-抓包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#https-抓包"}},[e._v("#")]),e._v(" https 抓包")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("proxy>SSL proxy settings")]),e._v(" 设置要代理的域名，默认端口 443")]),e._v(" "),t("li",[t("code",[e._v("proxy>proxy settings")]),e._v(" 设置代理端口")]),e._v(" "),t("li",[e._v("手机连到端口上")]),e._v(" "),t("li",[e._v("手机浏览器打开\nhttps://charlesproxy.com/getssl\n下载安装证书")]),e._v(" "),t("li",[e._v("接着可以访问配置域名的具体请求")])]),e._v(" "),t("h4",{attrs:{id:"拦截请求-修改返回数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#拦截请求-修改返回数据"}},[e._v("#")]),e._v(" 拦截请求，修改返回数据")]),e._v(" "),t("ul",[t("li",[e._v("连接上代理，访问页面")]),e._v(" "),t("li",[e._v("右击域名，点击 breakpoints")]),e._v(" "),t("li",[e._v("再次访问页面")]),e._v(" "),t("li",[e._v("charles 会停留在返回数据界面，等待进一步操作")])]),e._v(" "),t("h2",{attrs:{id:"spy-debugger"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spy-debugger"}},[e._v("#")]),e._v(" Spy-debugger")]),e._v(" "),t("p",[e._v("spy-dbugger 是一款一站式页面调试、抓包工具。使用方便，一行命令就能启动。详见"),t("a",{attrs:{href:"https://github.com/wuchangming/spy-debugger",target:"_blank",rel:"noopener noreferrer"}},[e._v("Spy-debugger"),t("OutboundLink")],1)]),e._v(" "),t("h2",{attrs:{id:"safari-调试-ios-webview"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#safari-调试-ios-webview"}},[e._v("#")]),e._v(" safari 调试 ios webview")]),e._v(" "),t("h4",{attrs:{id:"调试-iphone-浏览器页面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#调试-iphone-浏览器页面"}},[e._v("#")]),e._v(" 调试 iPhone 浏览器页面")]),e._v(" "),t("ul",[t("li",[e._v("iphone 在"),t("code",[e._v("设置>safari>高级")]),e._v("里"),t("code",[e._v("web检查器")]),e._v("打开")]),e._v(" "),t("li",[e._v("iphone 连接 mac")]),e._v(" "),t("li",[e._v("iphone safari 随便打开一个页面")]),e._v(" "),t("li",[e._v("在 mac safari "),t("code",[e._v("开发>xxx的iPhone")]),e._v("选项中，可以检查到 iphone safari 打开的页面，点开就可以对该页面进行进一步的调试。")])]),e._v(" "),t("h4",{attrs:{id:"调试-app-webview"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#调试-app-webview"}},[e._v("#")]),e._v(" 调试 app webview")]),e._v(" "),t("ul",[t("li",[e._v("原材料：simulator、app、mac safari")]),e._v(" "),t("li",[e._v("simulator 在"),t("code",[e._v("设置>safari>高级")]),e._v("里"),t("code",[e._v("web检查器")]),e._v("打开")]),e._v(" "),t("li",[e._v("在 xcode simulator 中安装 app，"),t("a",{attrs:{href:"http://taobaofed.org/blog/2015/11/13/web-debug-in-ios/",target:"_blank",rel:"noopener noreferrer"}},[e._v("如何在 simulator 安装 app"),t("OutboundLink")],1),e._v("。我是直接拿到源码在 xcode 里 build")]),e._v(" "),t("li",[e._v("这个时候在 simulator 打开 app 里的 webview 就会被 mac safari 检查到。")]),e._v(" "),t("li",[e._v("safari 在"),t("code",[e._v("开发>simulator")]),e._v("中，就能看见你打开的 webview")]),e._v(" "),t("li",[e._v("safari 是默认支持 surce map 的，所以你还可以对源码进行断点调试")]),e._v(" "),t("li",[e._v("（记得 webpack devtool 设置成为'source-map',如果是'cheap-module-source-map'或者其他设置，要么断点位置不对，要么就是直接看不到源码，这个涉及到不同 devtool 在不同浏览器中的表现，下次更）")])]),e._v(" "),t("h2",{attrs:{id:"ios-webkit-debug-proxy"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ios-webkit-debug-proxy"}},[e._v("#")]),e._v(" ios_webkit_debug_proxy")]),e._v(" "),t("p",[e._v("如果你觉得 safari 调试用的不习惯，还是喜欢 chrome 调试，就需要"),t("a",{attrs:{href:"https://github.com/google/ios-webkit-debug-proxy",target:"_blank",rel:"noopener noreferrer"}},[e._v("ios-webkit-debug-proxy"),t("OutboundLink")],1)]),e._v(" "),t("h4",{attrs:{id:"安装启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装启动"}},[e._v("#")]),e._v(" 安装启动")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#安装")]),e._v("\nbrew "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" ios-webkit-debug-proxy\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#启动")]),e._v("\nios_webkit_debug_proxy -f chrome-devtools://devtools/bundled/inspector.html\n")])])]),t("p",[e._v("（note：启动的时候，要先打开 simulator，再启动"),t("code",[e._v("ios-webkit-debug-proxy")]),e._v("）")]),e._v(" "),t("h4",{attrs:{id:"访问页面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#访问页面"}},[e._v("#")]),e._v(" 访问页面")]),e._v(" "),t("ul",[t("li",[e._v("simulator 打开一个 app 的 webview")]),e._v(" "),t("li",[e._v("chrome 浏览器打开http://127.0.0.1:9221")]),e._v(" "),t("li",[e._v("点击要打开的页面")]),e._v(" "),t("li",[e._v("如果下方有'block'提示,点击页面后，去控制台再点击一下页面链接")]),e._v(" "),t("li",[e._v("如果页面没有出现，需要重启一下 app，只有页面走网络传输的时候，才能被监听到，需要让页面再传输一次，被监听到")]),e._v(" "),t("li",[e._v("接下来就可以用你熟悉的调试界面查看 webview 了")])])])}),[],!1,null,null,null);a.default=s.exports}}]);